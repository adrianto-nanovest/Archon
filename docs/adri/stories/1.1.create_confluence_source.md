# Story 1.1: Create Confluence Knowledge Base Source

## Status

Draft

## Story

**As a** user,
**I want** to create a new knowledge base source of type "Confluence",
**so that** I can link it to a Google Drive folder containing my Confluence content.

## Acceptance Criteria

1.  AC1: The user can select "Confluence" as a source type in the UI.
2.  AC2: The user can provide a name, description, and a Google Drive folder URL for the new source.
3.  AC3: A new record is created in the `archon_sources` table with the appropriate metadata.

## Tasks / Subtasks

-   [ ] **Task 1**: Modify the frontend to add "Confluence" as a source type option.
    -   [ ] Subtask 1.1: Update the source type dropdown/selection component.
    -   [ ] Subtask 1.2: Add a new form for creating a Confluence source, including fields for name, description, and Google Drive folder URL.
-   [ ] **Task 2**: Create a new API endpoint to handle the creation of the Confluence source.
    -   [ ] Subtask 2.1: Define a new route `POST /api/sources/confluence`.
    -   [ ] Subtask 2.2: Implement the handler for the new endpoint.
-   [ ] **Task 3**: Implement the backend logic to create the new source in the database.
    -   [ ] Subtask 3.1: Update the `knowledge_item_service` to handle the creation of a "Confluence" source type.
    -   [ ] Subtask 3.2: Ensure the Google Drive folder URL and other metadata are stored correctly in the `archon_sources` table.

## Dev Notes

-   **Relevant Source Tree**:
    -   `archon-ui-main/src/`: The frontend code that will need to be modified.
    -   `python/src/server/api_routes/`: The directory where the new API route will be added.
    -   `python/src/server/services/knowledge/knowledge_item_service.py`: The service that will be modified to handle the new source type.
-   **Database Table**: `archon_sources`
-   **Metadata**: The `metadata` column of the `archon_sources` table should store the Google Drive folder URL.

### Testing

-   **Test file location**: `archon-ui-main/test/` for frontend tests, `python/tests/` for backend tests.
-   **Test standards**: Follow existing testing patterns. Add unit tests for the new API endpoint and service logic. Add component tests for the new UI components.

## Change Log

| Date       | Version | Description      | Author      |
| ---------- | ------- | ---------------- | ----------- |
| 2025-08-21 | 1.0     | Initial draft    | Bob (SM)    |
