# Archon Brownfield Architecture Document v3.0

## Table of Contents

- [Archon Brownfield Architecture Document v3.0](#table-of-contents)
  - [Introduction](./introduction.md)
    - [Document Scope](./introduction.md#document-scope)
    - [Change Log](./introduction.md#change-log)
  - [Quick Reference - Key Files and Entry Points](./quick-reference-key-files-and-entry-points.md)
    - [Critical Files for Understanding the System](./quick-reference-key-files-and-entry-points.md#critical-files-for-understanding-the-system)
      - [Backend Core](./quick-reference-key-files-and-entry-points.md#backend-core)
      - [Knowledge Base & RAG](./quick-reference-key-files-and-entry-points.md#knowledge-base-rag)
      - [Database & Migrations](./quick-reference-key-files-and-entry-points.md#database-migrations)
      - [Frontend Architecture](./quick-reference-key-files-and-entry-points.md#frontend-architecture)
    - [Files Relevant to Confluence Integration](./quick-reference-key-files-and-entry-points.md#files-relevant-to-confluence-integration)
      - [Existing Infrastructure (90% Code Reuse!)](./quick-reference-key-files-and-entry-points.md#existing-infrastructure-90-code-reuse)
      - [Files to CREATE for Confluence (New ~800 lines)](./quick-reference-key-files-and-entry-points.md#files-to-create-for-confluence-new-800-lines)
      - [Files to MODIFY (Minimal Changes)](./quick-reference-key-files-and-entry-points.md#files-to-modify-minimal-changes)
  - [High Level Architecture](./high-level-architecture.md)
    - [Technical Summary](./high-level-architecture.md#technical-summary)
    - [Actual Tech Stack](./high-level-architecture.md#actual-tech-stack)
    - [Repository Structure Reality Check](./high-level-architecture.md#repository-structure-reality-check)
  - [Source Tree and Module Organization](./source-tree-and-module-organization.md)
    - [Project Structure (Actual - October 2025)](./source-tree-and-module-organization.md#project-structure-actual-october-2025)
    - [Key Modules and Their Purpose](./source-tree-and-module-organization.md#key-modules-and-their-purpose)
      - [Core Services (Backend)](./source-tree-and-module-organization.md#core-services-backend)
      - [Knowledge Base Services (Critical for Confluence)](./source-tree-and-module-organization.md#knowledge-base-services-critical-for-confluence)
      - [LLM & Embedding Services](./source-tree-and-module-organization.md#llm-embedding-services)
      - [Migration & Versioning (NEW in v2.0)](./source-tree-and-module-organization.md#migration-versioning-new-in-v20)
  - [Data Models and APIs](./data-models-and-apis.md)
    - [Database Schema (SQL-based, No ORM!)](./data-models-and-apis.md#database-schema-sql-based-no-orm)
      - [Key Tables](./data-models-and-apis.md#key-tables)
        - [Knowledge Base Tables](./data-models-and-apis.md#knowledge-base-tables)
        - [Confluence Tables (TO CREATE in migration 010)](./data-models-and-apis.md#confluence-tables-to-create-in-migration-010)
        - [Project Management Tables (Optional Feature)](./data-models-and-apis.md#project-management-tables-optional-feature)
        - [Configuration Tables](./data-models-and-apis.md#configuration-tables)
    - [API Specifications](./data-models-and-apis.md#api-specifications)
      - [Knowledge Base APIs ()](./data-models-and-apis.md#knowledge-base-apis)
      - [Confluence APIs ( - TO CREATE)](./data-models-and-apis.md#confluence-apis-to-create)
      - [Migration APIs ( - NEW)](./data-models-and-apis.md#migration-apis-new)
      - [Version APIs ( - NEW)](./data-models-and-apis.md#version-apis-new)
      - [Projects APIs ()](./data-models-and-apis.md#projects-apis)
  - [Confluence Integration Architecture](./confluence-integration-architecture.md)
    - [Overview: Hybrid Schema Approach](./confluence-integration-architecture.md#overview-hybrid-schema-approach)
    - [Data Pipeline Flow (90% Code Reuse!)](./confluence-integration-architecture.md#data-pipeline-flow-90-code-reuse)
    - [CQL-Based Incremental Sync Strategy](./confluence-integration-architecture.md#cql-based-incremental-sync-strategy)
    - [Implementation Phases (1.5-2 Weeks)](./confluence-integration-architecture.md#implementation-phases-15-2-weeks)
      - [Phase 1: Database & Basic Sync (Week 1)](./confluence-integration-architecture.md#phase-1-database-basic-sync-week-1)
      - [Phase 2: API & Incremental Sync (Week 1)](./confluence-integration-architecture.md#phase-2-api-incremental-sync-week-1)
      - [Phase 3: Search Integration (Week 2)](./confluence-integration-architecture.md#phase-3-search-integration-week-2)
      - [Phase 4: Frontend & Testing (Week 2)](./confluence-integration-architecture.md#phase-4-frontend-testing-week-2)
    - [Files to Create (~800 lines total)](./confluence-integration-architecture.md#files-to-create-800-lines-total)
    - [Dependencies to Add](./confluence-integration-architecture.md#dependencies-to-add)
  - [Recent Major Changes (August - October 2025)](./recent-major-changes-august-october-2025.md)
    - [1. Multi-LLM Provider Ecosystem ‚úÖ IMPLEMENTED](./recent-major-changes-august-october-2025.md#1-multi-llm-provider-ecosystem-implemented)
    - [2. Migration Tracking System ‚úÖ IMPLEMENTED](./recent-major-changes-august-october-2025.md#2-migration-tracking-system-implemented)
    - [3. Version Checking System ‚úÖ IMPLEMENTED](./recent-major-changes-august-october-2025.md#3-version-checking-system-implemented)
    - [4. Web Crawling Enhancements ‚úÖ IMPLEMENTED](./recent-major-changes-august-october-2025.md#4-web-crawling-enhancements-implemented)
    - [5. BMad Methodology Integration üÜï INTEGRATED](./recent-major-changes-august-october-2025.md#5-bmad-methodology-integration-integrated)
    - [6. Frontend Architecture Improvements ‚úÖ IMPLEMENTED](./recent-major-changes-august-october-2025.md#6-frontend-architecture-improvements-implemented)
  - [Technical Debt and Known Issues](./technical-debt-and-known-issues.md)
    - [Implemented but Incomplete](./technical-debt-and-known-issues.md#implemented-but-incomplete)
    - [Planned but Not Implemented](./technical-debt-and-known-issues.md#planned-but-not-implemented)
    - [Current Technical Debt](./technical-debt-and-known-issues.md#current-technical-debt)
    - [Architecture Constraints](./technical-debt-and-known-issues.md#architecture-constraints)
  - [Integration Points and External Dependencies](./integration-points-and-external-dependencies.md)
    - [External Services](./integration-points-and-external-dependencies.md#external-services)
    - [LLM Provider Capabilities](./integration-points-and-external-dependencies.md#llm-provider-capabilities)
    - [Confluence API Integration (To Implement)](./integration-points-and-external-dependencies.md#confluence-api-integration-to-implement)
  - [Development and Deployment](./development-and-deployment.md)
    - [Local Development Setup](./development-and-deployment.md#local-development-setup)
    - [Build and Deployment Process](./development-and-deployment.md#build-and-deployment-process)
    - [Testing](./development-and-deployment.md#testing)
  - [Enhancement Impact Analysis: Confluence Integration](./enhancement-impact-analysis-confluence-integration.md)
    - [Summary](./enhancement-impact-analysis-confluence-integration.md#summary)
    - [Required Changes](./enhancement-impact-analysis-confluence-integration.md#required-changes)
      - [Backend Files to CREATE (~800 lines total)](./enhancement-impact-analysis-confluence-integration.md#backend-files-to-create-800-lines-total)
      - [Backend Files to MODIFY (Minimal Changes)](./enhancement-impact-analysis-confluence-integration.md#backend-files-to-modify-minimal-changes)
      - [Database Changes](./enhancement-impact-analysis-confluence-integration.md#database-changes)
      - [Frontend Files to CREATE (Future Phase)](./enhancement-impact-analysis-confluence-integration.md#frontend-files-to-create-future-phase)
      - [Dependencies to Add](./enhancement-impact-analysis-confluence-integration.md#dependencies-to-add)
    - [Implementation Workflow](./enhancement-impact-analysis-confluence-integration.md#implementation-workflow)
    - [Code Reuse Highlights](./enhancement-impact-analysis-confluence-integration.md#code-reuse-highlights)
    - [Reference Documentation](./enhancement-impact-analysis-confluence-integration.md#reference-documentation)
  - [Summary of Current State (October 2025)](./summary-of-current-state-october-2025.md)
    - [What Was Implemented ‚úÖ](./summary-of-current-state-october-2025.md#what-was-implemented)
    - [What Was Planned but Not Implemented ‚ùå](./summary-of-current-state-october-2025.md#what-was-planned-but-not-implemented)
    - [Current Version](./summary-of-current-state-october-2025.md#current-version)
    - [Recommended Next Steps](./summary-of-current-state-october-2025.md#recommended-next-steps)
  - [Appendix: Useful Commands and References](./appendix-useful-commands-and-references.md)
    - [Frequently Used Commands](./appendix-useful-commands-and-references.md#frequently-used-commands)
    - [Architecture Reference Documents](./appendix-useful-commands-and-references.md#architecture-reference-documents)
    - [Key Design Patterns](./appendix-useful-commands-and-references.md#key-design-patterns)
  - [Document Maintenance](./document-maintenance.md)
